# 🐾 Smart Pet Care System

#  (STM32-based)

本项目为基于 STM32F103ZETx 单片机的智能宠物照护系统，集成多种环境传感器、自动控制机制和可视化交互界面，具备蓝牙远程控制与图形反馈能力，适用于智能宠物屋、智能温控箱等场景。

---

## 🌟 项目亮点

- **多传感器融合感知**：DHT11 温湿度传感器 + 光敏传感器，实时获取环境数据；
- **自动控制逻辑**：支持风扇、照明、蜂鸣器的联动自动控制；
- **三种页面交互显示**：支持 LCD 多页面切换，图形化显示宠物“情绪”；
- **WS2812 彩灯图案绘制**：5×5 LED 点阵支持动态爱心图案与多色照明；
- **蓝牙交互控制**：通过 HC05 模块支持串口指令控制各类设备；
- **状态分级告警**：支持 Normal / Warning / Alarm 三种状态管理与颜色标识；
- **完整命令解析器**：支持 FAN/LIGHT/BEEP/AUTO 控制与 STATUS 查询。

---

## 🛠️ 使用硬件

| 模块          | 功能               |
| ------------- | ------------------ |
| STM32F103ZETx | 主控单片机         |
| DHT11         | 温湿度采集         |
| 光敏模块      | 环境光照强度检测   |
| WS2812        | 彩色点阵照明与装饰 |
| HC05          | 蓝牙通信模块       |
| LCD 屏        | 图形化人机界面     |
| 按键模块      | 页面切换与控制输入 |
| 蜂鸣器        | 告警输出           |
| 风扇（PWM）   | 温控风速调节       |

---

## ⚙️ 系统功能结构

![839b8d99244a66e531e18cb5982e039](C:\Users\刘博瑞\OneDrive\文档\WeChat Files\wxid_uoowjmo5jhvf12\FileStorage\Temp\839b8d99244a66e531e18cb5982e039.png)



---

## 🎮 支持的蓝牙命令（通过串口发送）

| 指令            | 功能                   |
| --------------- | ---------------------- |
| `+FAN ON/OFF`   | 打开/关闭风扇          |
| `+LIGHT ON/OFF` | 打开/关闭照明          |
| `+BEEP ON/OFF`  | 打开/关闭蜂鸣器        |
| `+AUTO ON/OFF`  | 开启/关闭自动控制模式  |
| `+STATUS?`      | 查询当前环境与设备状态 |
| `+music on`     | 播放音乐样例           |

---

## 📱 页面展示说明（LCD）

1. **PAGE_ROLE_STATUS**  
   显示系统状态（颜色标识）、蓝牙角色、连接状态；

2. **PAGE_ENV_DEVICE**  
   显示温度、湿度、光照值 + 风扇、照明、蜂鸣器状态 + 自动控制状态；

3. **PAGE_PICTURE**  
   根据环境显示对应宠物情绪图像（正常 / 炎热 / 光照过强）；

---

## ⌨️ 按键功能

| 按键     | 功能             |
| -------- | ---------------- |
| `KEY0`   | 页面切换         |
| `KEY_UP` | 切换自动控制开关 |
| `KEY1`   | 手动风扇开关控制 |

---

## 📦 文件结构说明

| 文件/文件夹    | 说明                         |
| -------------- | ---------------------------- |
| `main.c`       | 主控流程入口，处理按键+串口  |
| `pet_care.c/h` | 系统功能模块（核心控制逻辑） |
| `ws2812.c/h`   | RGB彩灯绘图、爱心图案显示    |
| `usart3.c/h`   | 蓝牙串口控制器               |
| `tftlcd.c/h`   | LCD 显示支持                 |
| `key.c/h`      | 按键处理                     |
| `dht11.c/h`    | 温湿度传感器驱动             |
| `lsens.c/h`    | 光敏传感器驱动               |
| `hc05.c/h`     | 蓝牙模块初始化与角色获取     |

---

## 🔚 项目总结

本系统实现了软硬件高度集成与良好的交互体验，适合用于物联网智能设备嵌入式开发入门、课程设计、嵌入式大作业展示等应用场景。